<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SJS.GD Mapping-Matters</title>
  <style>
    @font-face {
      font-family: 'YoungSerif';
      src: url('Fonts/YoungSerif-Regular.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      height: 100vh;
      overflow: hidden;
      font-family: 'YoungSerif', serif;
      background: #ffffff;
    }

    .top-section {
      height: 65%;
      position: relative;
      background: #ffffff;
    }

    .top-section::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 30px;
      right: 30px;
      height: 3px;
      background-color: #1d252d;
    }

    .preview-container {
      position: absolute;
      top: 45px;
      left: 30px;
      right: 30px;
      bottom: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      z-index: 2;
      opacity: 1;
    }

    .column-title:hover {
      font-style: italic;
    }

    .preview-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      aspect-ratio: 4/3;
    }

    .bottom-section {
      height: 35%;
      background: #ffffff;
    }

    .columns-container {
      height: 100%;
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
    }

    .column {
      flex: 0 0 33.33%;
      height: 100%;
      padding: 30px;
      overflow-y: hidden;
      scroll-snap-align: start;
      position: relative;
    }

    .column-title {
      position: absolute;
      top: 15px;
      left: 30px;
      font-weight: bold;
      color: #1d252d;
      font-size: 2rem;
      letter-spacing: 0.03rem;
      padding-bottom: 10px;
      border-bottom: 3px solid #1d252d;
      width: calc(100% - 60px);
      text-decoration: none;
    }

    .column-title:hover {
      font-weight: bold;
      font-style: italic;
    }

    .column-title:hover::after {
      content: " â†—";
    }

    .scroll-indicators {
      position: absolute;
      top: 20px;
      right: 30px;
      display: flex;
      gap: 8px;
    }

    .scroll-indicator {
      cursor: pointer;
      font-size: 1.75rem;
      color: #1d252d;
      user-select: none;
    }

    .column-content {
      height: calc(100% - 60px);
      margin-top: 60px;
      overflow-y: auto;
      scroll-snap-type: y mandatory;
    }

    .content-module {
      scroll-snap-align: start;
      scroll-snap-stop: always;
      height: 100%;
      display: flex;
      padding-bottom: 30px;
    }

    .image-container {
      flex: 0 0 55%;
      aspect-ratio: 4/3;
      background: #ffffff;
      overflow: hidden;
    }

    .content-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
    }

    .text-content {
      flex: 0 0 45%;
      padding-left: 30px;
    }

    .column-heading {
      font-size: 1.5rem;
      font-weight: 600;
      color: #1d252d;
      margin-bottom: 10px;
      letter-spacing: 0.02rem;
    }

    .column-body {
      font-size: 1.0rem;
      line-height: 1.5;
      color: #1d252d;
      margin-bottom: 20px;
    }

    .columns-container::-webkit-scrollbar,
    .column-content::-webkit-scrollbar {
      display: none;
    }

    .intro-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4rem;
      color: #1d252d;
      font-family: 'YoungSerif', serif;
      text-align: center;
      line-height: 1.1; /* tighter line height */
      text-transform: normal;
      max-width: 60ch; /* slightly wider text box */
      z-index: 1;
      pointer-events: none;
    }

    .intro-text span {
      display: block;
    }
  </style>
</head>
<body>
  <div class="top-section">
    
    <div class="intro-text">
      My Mapping Matters page is a curation of studios, practitioners and projects that resonate with my own practice and future ambitions; it is an exploration of my position in the graphic design industry.
    </div>

    <div class="preview-container" id="previewContainer">
      <img class="preview-image" id="previewImage">
    </div>
  </div>

  <div class="bottom-section">
    <div class="columns-container" id="columnsContainer">
      <div class="column">
        <a href="studios.html?column=1" class="column-title">Studios</a>
        <div class="scroll-indicators" id="scrollIndicators"></div>
        <div class="column-content column-1"></div>
      </div>
      <div class="column">
        <a href="studios.html?column=2" class="column-title">Practitioners</a>
        <div class="scroll-indicators"></div>
        <div class="column-content column-2"></div>
      </div>
      <div class="column">
        <a href="studios.html?column=3" class="column-title">Projects</a>
        <div class="scroll-indicators"></div>
        <div class="column-content column-3"></div>
      </div>
    </div>
  </div>

  <script>
    const modules = [
      { title: "The Office of Ordinary Things", column: 1, image: "images/TOOT Mon Wide.jpg", description: "Innovative architectural studio specializing in sustainable urban design solutions." },
      { title: "Leap", column: 1, image: "images/LEAP Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Pentagram", column: 1, image: "images/Pentagram Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "A-Side", column: 1, image: "images/A-Side Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Field", column: 1, image: "images/Field Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "The Liminal Space", column: 1, image: "images/The Liminal Space Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "How & How", column: 1, image: "images/How & How Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Instruct", column: 1, image: "images/Instruct Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Order", column: 1, image: "images/Order Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "From Form", column: 1, image: "images/From Form Mon Wide.jpg", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Edd Carr", column: 2, image: "", description: "Innovative architectural studio specializing in sustainable urban design solutions." },
      { title: "Georgia Lupi", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Thijs Biersteker", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Jacobo Cobian", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Claire Huss", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Harry Pearce", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Mike McQuade", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Talia Cotton", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Chantal Jahchan", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Oscar Warr", column: 2, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Seed Folk", column: 3, image: "", description: "Innovative architectural studio specializing in sustainable urban design solutions." },
      { title: "Aruba Conservation Foundation", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "WasteAge", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "National Trust Quarry Bank", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Don't Cry Wolf", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "The Wild Escape", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "New York Botanical Gardens", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Daylight", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "C-Skins", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." },
      { title: "Cottage Road Cinema", column: 3, image: "", description: "Mixed-use development featuring integrated green spaces and renewable energy systems." }
    ];

    const circledNumbers = ['\u24EA', '\u2460', '\u2461', '\u2462', '\u2463', '\u2464', '\u2465', '\u2466', '\u2467', '\u2468', '\u2789'];
    const filledNumbers = ['\u24FF', '\u2776', '\u2777', '\u2778', '\u2779', '\u277A', '\u277B', '\u277C', '\u277D', '\u277E', '\u277F'];

    const columnsContainer = document.getElementById('columnsContainer');
    const previewContainer = document.getElementById('previewContainer');
    const previewImage = document.getElementById('previewImage');
    const columns = Array.from(document.querySelectorAll('.column'));
    let activeColumn = null;

    columns.forEach((column, columnIndex) => {
      const content = column.querySelector('.column-content');
      const indicators = column.querySelector('.scroll-indicators');
      const relevantModules = modules.filter(m => m.column === columnIndex + 1);

      const template = `
        <div class="content-module">
          <div class="image-container">
            <img src="{{image}}" class="content-image" alt="{{title}}" />
          </div>
          <div class="text-content">
            <h2 class="column-heading">{{title}}</h2>
            <p class="column-body">{{description}}</p>
          </div>
        </div>
      `;

      const indicatorSpans = [];

      relevantModules.forEach((module, i) => {
        content.insertAdjacentHTML('beforeend', renderTemplate(template, module));

        const indicator = document.createElement('span');
        indicator.className = 'scroll-indicator';
        indicator.textContent = circledNumbers[i + 1];
        indicators.appendChild(indicator);
        indicatorSpans.push(indicator);

        indicator.addEventListener('click', async () => {
          const modules = Array.from(content.querySelectorAll('.content-module'));
          const currentIndex = Math.round(content.scrollTop / content.clientHeight);
          const targetIndex = i;

          const step = targetIndex > currentIndex ? 1 : -1;
          let index = currentIndex;

          while (index !== targetIndex) {
            index += step;
            const offset = modules[index].offsetTop;
            await scrollToStep(content, offset, 375);
          }
        });
      });

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const modules = Array.from(content.querySelectorAll('.content-module'));
            const index = modules.indexOf(entry.target);
            indicatorSpans.forEach((el, i) => {
              el.textContent = (i === index) ? filledNumbers[i + 1] : circledNumbers[i + 1];
            });
          }
        });
      }, {
        root: content,
        threshold: 0.6
      });

      content.querySelectorAll('.content-module').forEach(module => observer.observe(module));

      content.querySelectorAll('.content-module').forEach(module => {
        const img = module.querySelector('.content-image');
        module.addEventListener('mouseenter', () => {
          previewImage.src = img.src;
          previewContainer.style.display = 'flex';
        });
        module.addEventListener('mouseleave', () => {
          previewContainer.style.display = 'none';
        });
      });

      content.addEventListener('wheel', e => {
        e.preventDefault();
        content.scrollBy({
          top: Math.sign(e.deltaY) * content.clientHeight,
          behavior: 'smooth'
        });
      }, { passive: false });

      column.addEventListener('mouseenter', () => activeColumn = column);
      column.addEventListener('mouseleave', () => activeColumn = null);
    });

    window.addEventListener('wheel', e => {
      if (activeColumn) return;
      e.preventDefault();
      columnsContainer.scrollBy({
        left: Math.sign(e.deltaY) * columnsContainer.clientWidth,
        behavior: 'smooth'
      });
    }, { passive: false });

    function scrollToStep(container, target, duration) {
      return new Promise(resolve => {
        const start = container.scrollTop;
        const startTime = performance.now();

        function animateScroll(currentTime) {
          const elapsed = currentTime - startTime;
          const progress = Math.min(elapsed / duration, 1);
          container.scrollTop = start + (target - start) * progress;
          if (progress < 1) {
            requestAnimationFrame(animateScroll);
          } else {
            resolve();
          }
        }

        requestAnimationFrame(animateScroll);
      });
    }

    function renderTemplate(str, data) {
      return str.replace(/{{(.*?)}}/g, (_, key) => data[key.trim()]);
    }
  </script>
</body>
</html>
